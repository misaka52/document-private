### 僵尸进程和孤儿进程

僵尸进程：在linux系统中，用户线程执行完毕，会流程一个僵尸进程（Zombie）的数据结构，保存该进程的进程的进程号、退出码、退出状态、使用的cpu等信息，然后给父进程发送sigchld信号通知其回收。当父进程未调用wait/waitpid方法回收僵尸进程的话，僵尸进程就一直存在，占据一个进程资源。僵尸进程会占领进程资源，若一直未回收可能到导致进程占满，无法创建新进程，系统不可用

孤儿进程：当父进程结束，其仍在运行的子进程就会成为孤儿进程。这些孤儿进程最后会被init线程（系统线程）接管，孤儿进程运行结束后回收。孤儿线程不会对系统造成危害

如何解决僵尸进程未回收的问题：

1. 父进程收到子进程的sigchld信号后，调用wait/waitpid方法回收僵尸进程，此时会阻塞父进程
2. 若父进程很忙，可以创建handler来承接处理信号，handler中调用wait/waitpid方法回收僵尸进程。父进程收到sigchld信号后执行handler
3. 父进程显示表示对子进程的结束不感兴趣，子进程就是后就会主动释放僵尸进程，不同步父进程。父进程可以通过signal(SIGCLD, SIG_IGN)或signal(SIGCHLD, SIG_IGN)通知内核，自己对子进程的结束不感兴趣
4. fork两次：父进程fork一个子进程后继续工作；子进程fork一个孙进程后退出，孙进程就成了孤儿进程，被init进程接管，最后结束被回收。不过子进程的回收还是需要父进程自己完成



面试题

- tcp端口类型为unsigned short，最大为65536，可以配置。0为特殊端口不能使用，最多使用65535个端口号



## 基本指令

### du

查看当前磁盘目录大小

- -s：summary，总结
- -h：以高可读性的方式进行展示，比如1M，1G

```sh
# 查看当前目录下文件汇总
du -sh .
# 查看当前目录文件大小
du -h --max-depth=1 .
```

